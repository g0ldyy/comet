#=================================================#
#   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  #
#  ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  #
#  ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïë     #
#  ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù     ‚ñà‚ñà‚ïë     #
#  ‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïë     #
#   ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù     #
#=================================================#
#          Thank you for using Comet! üöÄ          #
#=================================================#

# ‚ö†Ô∏è IMPORTANT: DO NOT copy the entire content of this file to your .env file.
# Only copy and modify the variables you need to change.
# The default values shown in this file are automatically loaded by Comet.

# ============================== #
# Stremio Addon Configuration    #
# ============================== #
ADDON_ID=stremio.comet.fast
ADDON_NAME=Comet

# ============================== #
# FastAPI Server Configuration   #
# ============================== #
FASTAPI_HOST=0.0.0.0
FASTAPI_PORT=8000
FASTAPI_WORKERS=1 # DO NOT change this if you don't know what you are doing. Setting this to -1 will spawn a worker for each CPU core, which can consume several GBs of RAM and cause high CPU usage.
USE_GUNICORN=True # Will use uvicorn if False or if on Windows
GUNICORN_PRELOAD_APP=True # Set to False to start workers without preloading the app (reduces startup cost but requires schema to exist)
EXECUTOR_MAX_WORKERS=1 # Max workers for ProcessPoolExecutor (handles CPU-intensive tasks like RTN parsing). Recommended: 1. Do not exceed 4 unless you have a high-end machine.

# ============================== #
# Playback Settings              #
# ============================== #
PUBLIC_BASE_URL= # Optional: force playback URLs to use this public base (e.g. https://comet.example.com). Leave empty to use the request host.

# ============================== #
# Dashboard Settings             #
# ============================== #
ADMIN_DASHBOARD_PASSWORD=CHANGE_ME # The password to access the dashboard
PUBLIC_METRICS_API=False # Set to True to allow public access to the metrics API (/admin/api/metrics)

# ============================== #
# Database Configuration         #
# ============================== #
# ‚ö†Ô∏è  WARNING: SQLite has POOR CONCURRENCY support and should ONLY be used for development/testing!
# SQLite cannot handle multiple concurrent writers well, leading to:
#   - "database is locked" errors with multiple workers
#   - Performance issues with background scraper
#   - Data corruption risks under heavy load
# For production deployments, use PostgreSQL!
DATABASE_TYPE=postgresql # Options: sqlite, postgresql - Use postgresql for production, sqlite for development only
DATABASE_FORCE_IPV4_RESOLUTION=False # Set to True to force resolving the database hostname to an IPv4 address (fix for asyncpg on ARM64 - only if you are using postgresql)
DATABASE_URL=comet:comet@postgres:5432/comet # For PostgreSQL (user:password@host:port/database)
DATABASE_PATH=data/comet.db # Only relevant for SQLite (development only)
DATABASE_BATCH_SIZE=20000 # The batch size for the database import and export operations
DATABASE_READ_REPLICA_URLS='' # Optional JSON array of PostgreSQL read-only URLs, e.g. '["user:pass@replica-1/db", "user:pass@replica-2/db"]'
DATABASE_STARTUP_CLEANUP_INTERVAL=3600 # Minimum seconds between heavy startup cleanup sweeps (0=every start, -1=disable)

# ============================== #
# Cache Settings (Seconds)       #
# ============================== #
METADATA_CACHE_TTL=2592000  # 30 days

# TORRENT_CACHE_TTL: Controls when torrents are PERMANENTLY REMOVED from the database.
#    Set to -1 to disable automatic removal (torrents stay forever).
TORRENT_CACHE_TTL=2592000  # 30 days

# LIVE_TORRENT_CACHE_TTL: Controls when a NEW LIVE SEARCH is triggered.
#    If the cache is older than this value, Comet performs a new search to find new torrents.
#    Important: Old cached torrents are ALWAYS included in results, this only controls refresh frequency.
#    Set to -1 to never trigger new searches (always use existing cache only).
LIVE_TORRENT_CACHE_TTL=604800  # 7 days

DEBRID_CACHE_TTL=86400  # 1 day
DEBRID_CACHE_CHECK_RATIO=0.0  # Minimum ratio (0.5 = 5%) of cached torrents/total torrents required to skip re-checking availability on the debrid service.
METRICS_CACHE_TTL=60  # 1 minute
SCRAPE_LOCK_TTL=300  # 5 minutes - Duration for distributed scraping locks
SCRAPE_WAIT_TIMEOUT=30  # 30 seconds - Max time to wait for other instance to complete scraping

# ======================================================= #
# Background Scraper                                      #
# Zilean and no-ratelimit indexers/scrapers recommended!  #
# PostgreSQL recommended for high worker count!           #
# ======================================================= #
BACKGROUND_SCRAPER_ENABLED=False
BACKGROUND_SCRAPER_CONCURRENT_WORKERS=1 # Number of concurrent workers for scraping (adjust depending on whether you are often ratelimited by scrapers)
BACKGROUND_SCRAPER_INTERVAL=3600 # Interval between scraping cycles in seconds
BACKGROUND_SCRAPER_MAX_MOVIES_PER_RUN=100 # Maximum number of movies to scrape per run
BACKGROUND_SCRAPER_MAX_SERIES_PER_RUN=100 # Maximum number of series to scrape per run
CATALOG_TIMEOUT=30 # Max time to fetch catalog pages (seconds)

# ============================== #
# Anime Mapping Configuration    #
# ============================== #
# Anime Mapping is used to match IMDb/Kitsu IDs to Anime specific IDs (AniList, MAL, Kitsu, etc.) to retrieve title aliases.
# This greatly improves title matching performances for anime content by using accurate alternative titles.
ANIME_MAPPING_ENABLED=True
ANIME_MAPPING_REFRESH_INTERVAL=432000 # Seconds between background anime mapping refreshes when using database cache (<=0 disables)

# ============================== #
# Networking & Proxy Configuration #
# ============================== #
GLOBAL_PROXY_URL= # Global proxy for all outbound requests (e.g. http://user:pass@host:port)
PROXY_ETHOS=always # always: use proxy for everything; on_failure: retry with proxy if direct fails (not recommended); never: never use proxy (unless specific scraper override)
# Scraper specific proxies can be set using [SCRAPERNAME]_PROXY_URL
# Example: TORRENTIO_PROXY_URL=http://...

RATELIMIT_MAX_RETRIES=3 # Maximum number of retries for 429 Too Many Requests errors. Set to 0 to disable retries.
RATELIMIT_RETRY_BASE_DELAY=1.0 # Base delay in seconds for exponential backoff (e.g., 1.0 -> 1s, 2s, 4s, 8s...)

# ============================== #
# Jackett & Prowlarr Settings    #
# ============================== #

# Jackett Configuration
SCRAPE_JACKETT=False # Context mode: live, background, both, false
JACKETT_URL=http://127.0.0.1:9117
JACKETT_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
JACKETT_INDEXERS=[] # Leave empty to automatically use all configured/healthy indexers. Or specify a list of indexer IDs to use (e.g. '["oxtorrent", "torrent9"]').

# Prowlarr Configuration
SCRAPE_PROWLARR=False # Context mode: live, background, both, false
PROWLARR_URL=http://127.0.0.1:9696
PROWLARR_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
PROWLARR_INDEXERS=[] # Leave empty to automatically use all configured/healthy indexers. Or specify a list of indexer IDs.

# Shared Settings
INDEXER_MANAGER_TIMEOUT=30  # Max time to get search results (seconds) - Shared by both
INDEXER_MANAGER_WAIT_TIMEOUT=30 # Max time to wait for the indexer manager to initialize (seconds)
INDEXER_MANAGER_UPDATE_INTERVAL=900 # Time in seconds between indexer updates (default: 900s / 15m)

# ============================== #
# Torrent Settings               #
# ============================== #
GET_TORRENT_TIMEOUT=5 # Max time to download .torrent file (seconds)
DOWNLOAD_TORRENT_FILES=False # Enable torrent file retrieval from magnet link
MAGNET_RESOLVE_TIMEOUT=60 # Max time to resolve a magnet link (seconds)
DOWNLOAD_GENERIC_TRACKERS=False # Enable downloading generic trackers list at startup (for scraped torrents without trackers, doesn't work well most of the time)

# ============================== #
# Scraping Configuration         #
# ============================== #
# Multi-Instance Scraping Support:
# - Single URL: Use a simple string for one instance (default behavior)
# - Multiple URLs: Use JSON array format for multiple instances
# - Example single: COMET_URL=https://comet.feels.legal
# - Example multi: COMET_URL='["https://comet1.example.com", "https://comet2.example.com"]'
#
# Scraper Context Modes:
# Each SCRAPE_* setting can control when scrapers are used:
# - true/both: Used for live scraping AND background scraping (default)
# - live: Only used for live scraping (when users request content)
# - background: Only used for background scraping (automatic content pre-caching)
# - false: Completely disabled
#
# Examples:
# SCRAPE_COMET=both          # Used for both live and background scraping
# SCRAPE_TORRENTIO=live      # Fast live scraping only
# SCRAPE_ZILEAN=background   # Background cache building only
# SCRAPE_NYAA=false          # Completely disabled
# SCRAPE_JACKETT=live        # Jackett for live scraping only
# SCRAPE_PROWLARR=background # Prowlarr for background scraping only

SCRAPE_COMET=False
COMET_URL=https://comet.feels.legal
# Multi-instance example:
# COMET_URL='["https://comet1.example.com", "https://comet2.example.com"]'

SCRAPE_NYAA=False
NYAA_ANIME_ONLY=True # Only scrape Nyaa if the content is anime
NYAA_MAX_CONCURRENT_PAGES=5 # Maximum number of concurrent requests to Nyaa (consider reducing if you are often ratelimited by Nyaa)

SCRAPE_ANIMETOSHO=False
ANIMETOSHO_ANIME_ONLY=True # Only scrape AnimeTosho if the content is anime
ANIMETOSHO_MAX_CONCURRENT_PAGES=10 # Maximum number of concurrent requests to AnimeTosho (consider reducing if you are often ratelimited by AnimeTosho)

SCRAPE_ZILEAN=False
ZILEAN_URL=https://zileanfortheweebs.midnightignite.me
# Multi-instance example:
# ZILEAN_URL='["https://zilean1.example.com", "https://zilean2.example.com"]'

SCRAPE_STREMTHRU=False
STREMTHRU_SCRAPE_URL=https://stremthru.13377001.xyz
# Multi-instance example:
# STREMTHRU_SCRAPE_URL='["https://stremthru1.example.com", "https://stremthru2.example.com"]'

SCRAPE_BITMAGNET=False
BITMAGNET_URL=https://bitmagnetfortheweebs.midnightignite.me
BITMAGNET_MAX_CONCURRENT_PAGES=5
BITMAGNET_MAX_OFFSET=15000 # Maximum number of entries to scrape
# Multi-instance example:
# BITMAGNET_URL='["https://bitmagnet1.example.com", "https://bitmagnet2.example.com"]'

SCRAPE_TORRENTIO=False
TORRENTIO_URL=https://torrentio.strem.fun
# Multi-instance example:
# TORRENTIO_URL='["https://torrentio.strem.fun", "https://custom-torrentio.example.com"]'

SCRAPE_MEDIAFUSION=False
MEDIAFUSION_URL=https://mediafusion.elfhosted.com
MEDIAFUSION_API_PASSWORD= # API password for MediaFusion instances that require authentication
MEDIAFUSION_LIVE_SEARCH=True
# Multi-instance MediaFusion examples:
# MEDIAFUSION_URL='["https://mediafusion1.example.com", "https://mediafusion2.example.com"]'
# MEDIAFUSION_API_PASSWORD='["password1", "password2"]' # One password per URL in same order
# MEDIAFUSION_API_PASSWORD=single_password # Same password for all instances
# MEDIAFUSION_API_PASSWORD= # No password for any instance

SCRAPE_AIOSTREAMS=False
AIOSTREAMS_URL=https://aio.example.com
AIOSTREAMS_USER_UUID_AND_PASSWORD=user_uuid:password
# Multi-instance AIOStreams examples:
# AIOSTREAMS_URL='["https://aio1.example.com", "https://aio2.example.com"]'
# AIOSTREAMS_USER_UUID_AND_PASSWORD='["uuid1:password1", "uuid2:password2"]' # One credential per URL in same order
# AIOSTREAMS_USER_UUID_AND_PASSWORD=single_uuid:single_password # Same credentials for all instances

SCRAPE_JACKETTIO=False
JACKETTIO_URL=https://jackettio.example.com # Full manifest URL without /manifest.json at the end
# Multi-instance example:
# JACKETTIO_URL='["https://jackettio1.example.com", "https://jackettio2.example.com"]'

SCRAPE_DEBRIDIO=False
DEBRIDIO_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
DEBRIDIO_PROVIDER=realdebrid # alldebrid, debrider, debridlink, easydebrid, premiumize, realdebrid, torbox
DEBRIDIO_PROVIDER_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

SCRAPE_TORBOX=False
TORBOX_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

SCRAPE_TORRENTSDB=False

SCRAPE_PEERFLIX=False

# ============================== #
# Debrid Stream Proxy Settings   #
# ============================== #
PROXY_DEBRID_STREAM=False
PROXY_DEBRID_STREAM_PASSWORD=CHANGE_ME
PROXY_DEBRID_STREAM_MAX_CONNECTIONS=-1 # -1 to disable connection limits
PROXY_DEBRID_STREAM_DEBRID_DEFAULT_SERVICE=realdebrid
PROXY_DEBRID_STREAM_DEBRID_DEFAULT_APIKEY=CHANGE_ME
PROXY_DEBRID_STREAM_INACTIVITY_THRESHOLD=300 # Seconds to wait before cleaning up an inactive connection. Set to 0 to disable.

# ============================== #
# Torrent Stream Policy          #
# ============================== #
DISABLE_TORRENT_STREAMS=False # When true, torrent-only requests return a friendly message instead of magnets
TORRENT_DISABLED_STREAM_NAME=[INFO] Comet # Stremio stream name shown when torrents are disabled
TORRENT_DISABLED_STREAM_DESCRIPTION=Direct torrent playback is disabled on this server. # Description shown to users in Stremio
TORRENT_DISABLED_STREAM_URL=https://comet.feels.legal # Optional URL included in the placeholder stream response

# ============================== #
# Content Filtering              #
# ============================== #
REMOVE_ADULT_CONTENT=False
RTN_FILTER_DEBUG=False # Set to True to log why torrents are excluded by RTN (debug only, verbose!)
DIGITAL_RELEASE_FILTER=False # Filter unreleased content
TMDB_READ_ACCESS_TOKEN= # Optional: Provide your own TMDB Read Access Token to avoid using the shared default key

# ============================== #
# UI Customization               #
# ============================== #
CUSTOM_HEADER_HTML=None

# ============================== #
# StremThru Integration          #
# ============================== #
STREMTHRU_URL=https://stremthru.13377001.xyz # needed to use debrid services

# ============================== #
# HTTP Cache Settings            #
# ============================== #
# These settings control HTTP-level caching.
# Comet sends proper Cache-Control headers that can be respected by proxies.
#
# Key cacheable endpoints:
# - /stream/{type}/{id}.json (PUBLIC - shared cache, no user config)
# - /{config}/stream/... (PRIVATE - user-specific, browser only)
# - /configure (PUBLIC/PRIVATE - depends on CUSTOM_HEADER_HTML)

HTTP_CACHE_ENABLED=False # Master switch for HTTP cache headers

# STREAMS streams TTL (for /stream/movie/tt1234567.json)
# These results are cached at edge and shared between all users.
# Higher = less traffic to origin, Lower = faster updates for new content
HTTP_CACHE_STREAMS_TTL=300 # 5 minutes

# Stale-While-Revalidate: serve stale content while fetching fresh in background
# Improves perceived performance - users get instant response with cached data
HTTP_CACHE_STALE_WHILE_REVALIDATE=60 # 1 minute

# MANIFEST TTL (for /manifest.json and /{config}/manifest.json)
# Manifest rarely changes, can be cached longer
HTTP_CACHE_MANIFEST_TTL=86400 # 24 hours (recommended: 3600-86400)

# CONFIGURE page TTL (for /configure and /{config}/configure)
# Static page, can be cached for a long time
HTTP_CACHE_CONFIGURE_TTL=86400 # 24 hours (recommended: 3600-86400)

# ============================== #
# CometNet P2P Network           #
# ============================== #
# CometNet is a decentralized P2P network that allows Comet instances to
# share torrent metadata automatically. When enabled, newly discovered
# torrents are propagated across the network, improving content coverage.
#
# ‚ö†Ô∏è EXPERIMENTAL: CometNet is a new feature and may have bugs.
#
# ====================================================================
# DEPLOYMENT CONFIGURATIONS:
# ====================================================================
# For detailed deployment instructions, please read the documentation:
# https://github.com/g0ldyy/comet
# ====================================================================

# === INTEGRATED MODE SETTINGS ===
COMETNET_ENABLED=False # Enable integrated CometNet P2P network (single instance only!)
COMETNET_LISTEN_PORT=8765 # WebSocket port for incoming P2P connections (ensure it's accessible if behind NAT)
COMETNET_HTTP_PORT=8766 # HTTP API port (only used by standalone service)

# === RELAY MODE SETTINGS (for clusters) ===
COMETNET_RELAY_URL= # URL of standalone CometNet service (e.g. http://cometnet:8766). When set, COMETNET_ENABLED is ignored.
COMETNET_API_KEY= # Optional API key for standalone service authentication. If set, all endpoints except /health require X-API-Key header.

# === NETWORK DISCOVERY ===
# Bootstrap nodes are public entry points to join the network.
# Format: JSON array of WebSocket URLs
# Example: COMETNET_BOOTSTRAP_NODES='["wss://bootstrap1.cometnet.example:8765", "wss://bootstrap2.cometnet.example:8765"]'
COMETNET_BOOTSTRAP_NODES=[]

# Manual peers to connect to directly (trusted peers).
# Format: JSON array of WebSocket URLs
# Example: COMETNET_MANUAL_PEERS='["ws://trusted-peer.example.com:8765"]'
COMETNET_MANUAL_PEERS=[]

# === PEER MANAGEMENT ===
COMETNET_MAX_PEERS=50 # Maximum number of simultaneous peer connections
COMETNET_MIN_PEERS=3 # Minimum desired peers (will actively discover if below this)

# === IDENTITY & SECURITY ===
COMETNET_KEYS_DIR=data/cometnet # Directory to store P2P identity keys and state
COMETNET_ADVERTISE_URL= # Public URL to advertise to peers (e.g. wss://comet.example.com/cometnet/ws). Required if behind reverse proxy/domain.
COMETNET_KEY_PASSWORD= # Optional password to encrypt the private key on disk

# === ADVANCED SETTINGS ===
COMETNET_ALLOW_PRIVATE_PEX=False # Allow private/internal IPs via Peer Exchange (useful for LAN setups, disabled by default for security)
COMETNET_UPNP_ENABLED=False # Enable UPnP to automatically open the listening port on your router (useful for home connections)
COMETNET_UPNP_LEASE_DURATION=3600 # UPnP port mapping lease duration in seconds (default: 1 hour)

# === GOSSIP TUNING (Advanced) ===
# Adjust how torrents propagate through the network.
COMETNET_GOSSIP_FANOUT=3 # Number of random peers to share a message with in each round
COMETNET_GOSSIP_INTERVAL=1.0 # Seconds between gossip rounds
COMETNET_GOSSIP_MESSAGE_TTL=5 # Max hops a message can travel before dying
COMETNET_GOSSIP_MAX_TORRENTS_PER_MESSAGE=1000 # Max torrents in a single gossip message
COMETNET_GOSSIP_CACHE_TTL=300 # Seconds to remember seen messages (deduplication)
COMETNET_GOSSIP_CACHE_SIZE=10000 # Max number of seen messages to cache
COMETNET_GOSSIP_VALIDATION_FUTURE_TOLERANCE=60 # Seconds to allow for clock drift in future timestamps
COMETNET_GOSSIP_VALIDATION_PAST_TOLERANCE=300 # Seconds to allow for clock drift in past timestamps
COMETNET_GOSSIP_TORRENT_MAX_AGE=604800 # Max age in seconds (7 days) for accepting torrent updates

# === DISCOVERY TUNING (Advanced) ===
# Adjust peer discovery and connection behavior.
COMETNET_PEX_BATCH_SIZE=20 # Number of peers to share in PEX responses
COMETNET_PEER_CONNECT_BACKOFF_MAX=300 # Max seconds to wait before reconnecting to a failed peer
COMETNET_PEER_MAX_FAILURES=5 # Max failures before temporarily banning a peer
COMETNET_PEER_CLEANUP_AGE=604800 # Seconds (7 days) to keep inactive peers in database

# === TRANSPORT TUNING (Advanced) ===
# Adjust network transport limitations.
COMETNET_TRANSPORT_MAX_MESSAGE_SIZE=10485760 # Max WebSocket message size in bytes (10MB)
COMETNET_TRANSPORT_MAX_CONNECTIONS_PER_IP=3 # Max connections allowed from a single IP (Anti-Sybil)
COMETNET_TRANSPORT_PING_INTERVAL=30.0 # Seconds between keepalive pings
COMETNET_TRANSPORT_CONNECTION_TIMEOUT=120.0 # Seconds before dropping a silent connection

# === REPUTATION SYSTEM (Advanced) ===
# Adjust how peer trust is calculated. 0.0 to 10000.0.
COMETNET_REPUTATION_INITIAL=100.0
COMETNET_REPUTATION_MIN=0.0
COMETNET_REPUTATION_MAX=10000.0
COMETNET_REPUTATION_THRESHOLD_TRUSTED=1000.0 # Score needed to be considered "trusted" (approx 1 day of heavy scraping)
COMETNET_REPUTATION_THRESHOLD_UNTRUSTED=50.0 # Score below which a peer is ignored
COMETNET_REPUTATION_BONUS_VALID_CONTRIBUTION=0.001 # Bonus for every valid torrent contributed (1M torrents = 1000 pts)
COMETNET_REPUTATION_BONUS_PER_DAY_ANCIENNETY=10.0 # Daily bonus for long-running peers
COMETNET_REPUTATION_BONUS_MAX_ANCIENNETY=1000.0 # Max total bonus from anciennety
COMETNET_REPUTATION_BONUS_TRUSTED_RECOMMENDATION=100.0 # Bonus when a trusted peer vouches for you
COMETNET_REPUTATION_PENALTY_INVALID_CONTRIBUTION=50.0 # Penalty for sending bad data
COMETNET_REPUTATION_PENALTY_SPAM_DETECTED=100.0 # Penalty for spamming
COMETNET_REPUTATION_PENALTY_INVALID_SIGNATURE=500.0 # Penalty for invalid cryptographic signatures
COMETNET_REPUTATION_INVALID_RATIO_THRESHOLD=0.5 # Max ratio of invalid/total contributions before penalties apply
COMETNET_REPUTATION_CLEANUP_AGE_DAYS=30.0 # Days after which inactive peers are removed from reputation store

# ==============================================================================
# COMETNET - TRUST POOLS & PRIVATE NETWORKS
# ==============================================================================
# CometNet introduces Trust Pools for community organization and private networks
# for isolated deployments.

# === CONTRIBUTION MODE ===
# Controls what this node shares and receives on the network.
# - full: Share own torrents + receive + repropagate (default, full participation)
# - consumer: Receive + repropagate, but don't share own torrents (passive node)
# - source: Share own torrents only, don't receive (dedicated scraper)
# - leech: Receive only, don't repropagate (save bandwidth, selfish mode)
COMETNET_CONTRIBUTION_MODE=full

# === TRUST POOLS ===
# Trust Pools are groups of nodes that trust each other. When you subscribe to
# a pool, you only accept torrents from members of that pool.
#
# Format: JSON array of pool IDs to subscribe to
# Example: COMETNET_TRUSTED_POOLS='["official-sources", "french-community"]'
#
# If empty (default): Open mode - accept torrents from everyone
COMETNET_TRUSTED_POOLS=[]

# Directory for storing pool manifests, memberships, and invitations
COMETNET_POOLS_DIR=data/cometnet/pools

# === PRIVATE NETWORK ===
# Create or join a private, isolated CometNet network.
# Private networks are completely separate from the public network.

# Enable private network mode
COMETNET_PRIVATE_NETWORK=False

# Unique identifier for your private network (required if PRIVATE_NETWORK=True)
# Example: COMETNET_NETWORK_ID=my-private-network
COMETNET_NETWORK_ID=

# Password to join the private network (shared secret, required if PRIVATE_NETWORK=True)
# This password is never transmitted - it's used to derive authentication tokens
COMETNET_NETWORK_PASSWORD=

# Pools to ingest from even when in private mode (pull from public network)
# Format: JSON array of public pool IDs
# Example: COMETNET_INGEST_POOLS='["official-sources"]'
# This allows private networks to receive data from trusted public sources
COMETNET_INGEST_POOLS=[]
